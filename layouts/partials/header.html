<header class="Header">
  {{ $currentPage := . }}
  <div class="Header-container Container">

    {{/* Mobile menu icon */}}
    <div class="Header-menuIcon" id="header-menu-icon" aria-role="button" tabindex="0">
      <span data-feather="menu"></span>
    </div>

    {{/* Brand title */}}
    <a href="/" class="Header-brand">{{ .Site.Params.brand }}</a>

    {{/* Desktop nav items */}}
    <nav class="Header-desktop">
      <ul class="Header-desktop-list">
        {{ range .Site.Menus.main }}
          <li>
            {{ $isPageActive := hasPrefix $currentPage.RelPermalink .URL }}
            <a class="Header-desktop-link {{ if $isPageActive }}is-active{{ end }}" href="{{ .URL }}">{{ .Name }}</a>
          </li>
        {{ end }}
      </ul>
    </nav>
  </div>

  {{/* Mobile menu (container) */}}
  <div class="Head-mobileContainer" id="header-mobile-container">
    {{/* Mobile nav */}}
    <nav class="Header-mobile">
      {{/* Close control */}}
      <div class="Header-mobile-closeGutter">
        <div class="Header-mobile-closeIcon" id="header-mobile-close-icon" aria-role="button" tabindex="0">
          <span data-feather="x"></span>
        </div>
      </div>

      {{/* Scrollable frame */}}
      <div class="Header-mobile-scrollable">
        {{/* Nav items */}}
        <ul class="Header-mobile-list">
          <li class="Header-mobile-listItem">
            <a class="Header-mobile-link" href="/">Home</a>
          </li>
          {{ range .Site.Menus.main }}
            <li class="Header-mobile-listItem">
              {{ $isPageActive := hasPrefix $currentPage.RelPermalink .URL }}
              <a class="Header-mobile-link {{ if $isPageActive }}is-active{{ end }}" href="{{ .URL }}">{{ .Name }}</a>
            </li>
          {{ end }}
        </ul>
      </div>
    </nav>

    {{/* Click-absorber, behind menu */}}
    <div class="Header-mobile-invisibilityCloak" id="header-mobile-click-absorber"></div>
  </div>
</header>